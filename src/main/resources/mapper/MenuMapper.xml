<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qbp.mapper.MenuMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.qbp.model.entity.Menu">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="parent_id" property="parentId"/>
        <result column="web_name" property="webName"/>
        <result column="web_icon" property="webIcon"/>
        <result column="wen_path" property="wenPath"/>
    </resultMap>
    <select id="getMenus" resultMap="BaseResultMap">
        SELECT m.id, m.name, m.parent_id, m.web_name, m.web_icon, m.wen_path
        FROM menu m
                 JOIN role_menu_relation rmr ON m.id = rmr.menu_id
                 JOIN user_role_relation urr ON rmr.role_id = urr.role_id
        WHERE urr.user_id = #{id};
    </select>
</mapper>
